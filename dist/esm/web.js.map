{"version":3,"file":"web.js","sourceRoot":"","sources":["../../src/web.ts"],"names":[],"mappings":"AAAA,OAAO,EAAwB,SAAS,EAAE,MAAM,iBAAiB,CAAC;AAIlE,MAAM,YAAY,GAAG,IAAI,GAAG,EAAyB,CAAC;AAEtD,MAAM,OAAO,YAAa,SAAQ,SAAS;IAEzC,WAAW;QACT,aAAa;QACd,UAAU,CAAC,EAAE,GAAG,IAAI,CAAA;IACrB,CAAC;IAED,aAAa;IACb,WAAW,CAAC,SAAc,EAAE,YAAiB;;QAC3C,MAAM,CAAC,GAAG,MAAA,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,mCAAI,IAAI,GAAG,EAAE,CAAA;QAElD,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;QAEnB,YAAY,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,CAAA;QAE9B,OAAO;YACL,MAAM,EAAE,KAAK,IAAI,EAAE;gBACjB,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAA;YACxB,CAAC;SACF,CAAA;IACH,CAAC;IAES,eAAe,CAAC,SAAiB,EAAE,IAAS;;QACpD,MAAM,CAAC,GAAG,MAAA,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,mCAAI,IAAI,GAAG,EAAE,CAAA;QAElD,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAA;IACzC,CAAC;IAED,IAAI,CAAC,IAAkC;QACrC,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,gBAClC,SAAS,EAAE,OAAO,EAClB,QAAQ,EAAE,eAAe,EACzB,MAAM,EAAE,SAAS,IACd,IAAI,CACe,CAAC,CAAA;IAC3B,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,QAA2B;QAC7C,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;QAEnC,IAAI,CAAC,WAAW,EAAE,CAAA;IACpB,CAAC;IAED,KAAK;QACH,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC5B,CAAC;CACF","sourcesContent":["import { PluginListenerHandle, WebPlugin } from '@capacitor/core';\r\nimport { DataWedgePlugin, DataWedgeScanResult } from './definitions';\r\n\r\n\r\nconst listenersMap = new Map<string, Set<Function>>();\r\n\r\nexport class DataWedgeWeb extends WebPlugin implements DataWedgePlugin {\r\n\r\n  initVirtual() {\r\n    // @ts-ignore\r\n   globalThis.dw = this\r\n  }\r\n\r\n  // @ts-ignore\r\n  addListener(eventName: any, listenerFunc: any): PluginListenerHandle {        \r\n    const l = listenersMap.get(eventName) ?? new Set()\r\n\r\n    l.add(listenerFunc)\r\n\r\n    listenersMap.set(eventName, l)\r\n    \r\n    return {\r\n      remove: async () => {\r\n        l.delete(listenerFunc)\r\n      }\r\n    }\r\n  }\r\n\r\n  protected notifyListeners(eventName: string, data: any): void {\r\n    const l = listenersMap.get(eventName) ?? new Set()    \r\n    \r\n    l.forEach((listener) => listener(data))\r\n  }\r\n\r\n  scan(data: Partial<DataWedgeScanResult>) {\r\n    this.notifyListeners('scan_result', {\r\n      labelType: 'EAN13',\r\n      scanData: '1234567890128',\r\n      source: 'scanner',\r\n      ...data\r\n    } as DataWedgeScanResult)\r\n  }\r\n\r\n  async createProfile(_options: { name: string; }): Promise<any> {\r\n    console.debug('DW: createProfile');\r\n\r\n    this.initVirtual()\r\n  }\r\n\r\n  alert(): void {\r\n    console.warn('DW: alert');\r\n  }\r\n}\r\n"]}